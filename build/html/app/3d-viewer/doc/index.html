
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Viewer &#8212; Phoebus 1.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Alarm Datasource" href="../../alarm/datasource/doc/index.html" />
    <link rel="prev" title="Active Jobs" href="../../../core/ui/doc/index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../alarm/datasource/doc/index.html" title="Alarm Datasource"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../../../core/ui/doc/index.html" title="Active Jobs"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Phoebus 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../applications.html" accesskey="U">Applications</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">3D Viewer</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="d-viewer">
<h1>3D Viewer<a class="headerlink" href="#d-viewer" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The 3d Viewer is a tool that allows users to configure 3 dimensional structures using spheres, cylinders, and boxes.</p>
<p>These structures are defined in shape file (<cite>*.shp</cite>) and parsed by the application.</p>
<p>The resultant structure is then  rendered on screen. This structure can be viewed in the application which allows rotation, zoom, and movement.</p>
<p>The individual spheres, cylinders, and boxes that make up the structure can have their coordinates, sizes, and colors specified.</p>
</div>
<div class="section" id="shape-shp-file-syntax">
<h2>Shape (.shp) File Syntax<a class="headerlink" href="#shape-shp-file-syntax" title="Permalink to this headline">¶</a></h2>
<p>The viewer parses shape files from beginning to end. Any error in the shape file will cause the parsing of the entire file to fail and no resulting
structure will be rendered.</p>
<dl>
<dt><strong>Comments</strong></dt><dd><p>Shape files can have comments. A comment is a line of text that starts with a ‘#’. This line will be ignored when parsing the shape file.</p>
</dd>
<dt><strong>Background Color</strong></dt><dd><p>The background color of the viewer can be controlled using the following command.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">background(r,</span> <span class="pre">g,</span> <span class="pre">b,</span> <span class="pre">A)</span></code></p>
</div></blockquote>
<p>This command has four parameters. The red, green, and blue values for the color are the first three. Each color value is an integer from 0 through 255.
These are followed by the alpha value which allows you to control the transparency of the color. Alpha is a floating point number in the range [0, 1].
An alpha of 0 is transparent while an alpha of 1 is opaque.</p>
<p>Multiple background colors may be defined, however only the last defined background color will be used.</p>
</dd>
<dt><strong>Spheres</strong></dt><dd><p>A sphere may be defined using the following command.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">sphere(x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">R,</span> <span class="pre">r,</span> <span class="pre">g,</span> <span class="pre">b,</span> <span class="pre">A)</span></code></p>
</div></blockquote>
<p>This command has eight parameters. The first three parameters are the x, y, and z values which represent the center point of the sphere in the three dimensional space.
The x, y, and z parameters are floating point values. These are followed by the radius of the sphere, another floating point value.
The final four parameters are the red, green, blue, and alpha values used to define the color of the sphere. Red, green, and blue are integer values in [0, 255] and
alpha is a floating point value in [0, 1].</p>
</dd>
<dt><strong>Cylinders</strong></dt><dd><p>A cylinder may be defined using the following command.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">cylinder(x1,</span> <span class="pre">y1,</span> <span class="pre">z1,</span> <span class="pre">x2,</span> <span class="pre">y2,</span> <span class="pre">z2,</span> <span class="pre">R,</span> <span class="pre">r,</span> <span class="pre">g,</span> <span class="pre">b,</span> <span class="pre">A)</span></code></p>
</div></blockquote>
<p>This command has eleven parameters. The first three parameters are the x, y, and z values which represent one end point of the cylinder. The second three parameters
are the x, y, and z values which represent the other end point of the cylinder. All x, y, and z parameters are floating point values. These are followed the cylinder’s
radius. The radius is a floating point value. The final four parameters are the red, green, blue, and alpha values used to define the color of the sphere. Red, green,
and blue are integer values in [0, 255] and alpha is a floating point value in [0, 1].</p>
</dd>
<dt><strong>Boxes</strong></dt><dd><p>A box may be defined using the following command.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">box(x1,</span> <span class="pre">y1,</span> <span class="pre">z1,</span> <span class="pre">x2,</span> <span class="pre">y2,</span> <span class="pre">z2,</span> <span class="pre">r,</span> <span class="pre">g,</span> <span class="pre">b,</span> <span class="pre">A)</span></code></p>
</div></blockquote>
<p>This command has 10 parameters. The first three parameters are the x, y, and z values which represent one corner of the box.The second three parameters are the x, y, and z
values which represent the opposite corner of the box. All x, y, and z parameters are floating point values. The final four parameters are the red, green, blue, and alpha
values used to define the color of the sphere. Red, green, and blue are integer values in [0, 255] and alpha is a floating point value in [0, 1].</p>
<p>If the first corner of a box was defined at (0, 0, 0) and the second corner at (100, 100, 100) then the box would have one corner at the origin and one corner at (100, 100, 100).
Each of the boxes sides would be of length 100, and the boxes center point would be (50, 50, 50).</p>
</dd>
<dt><strong>Cones</strong></dt><dd><p>A cone may be defined using the following command.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">cone(x1,</span> <span class="pre">y1,</span> <span class="pre">z1,</span> <span class="pre">R,</span> <span class="pre">x2,</span> <span class="pre">y2,</span> <span class="pre">z2,</span> <span class="pre">r,</span> <span class="pre">g,</span> <span class="pre">b,</span> <span class="pre">A)</span></code></p>
</div></blockquote>
<p>This command has eleven parameters.
The first three parameters are the x, y, and z values of the base, followed by the radius of the base.
The second three parameters are the x, y, and z values of the tip of the cone.
The final four parameters are the red, green, blue, and alpha values used to define the color.</p>
</dd>
<dt><strong>Tool Tips</strong></dt><dd><p>A final string added to a shape defines a tool tip for the shape.</p>
</dd>
</dl>
</div>
<div class="section" id="example-shape-file">
<h2>Example Shape File<a class="headerlink" href="#example-shape-file" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># This is a comment. It will be ignored when the file is parsed.

# The background of the viewer is set to be nearly black.
background(32, 32, 32, 1)

# A red sphere of radius 10, is placed at each corner of the box we are about to define.
sphere(  0,   0,   0, 10, 255, 0, 0, 1, &quot;Origin&quot;)
sphere(100,   0,   0, 10, 255, 0, 0, 1)
sphere(  0,   0, 100, 10, 255, 0, 0, 1)
sphere(100,   0, 100, 10, 255, 0, 0, 1)
sphere(  0, 100,   0, 10, 255, 0, 0, 1)
sphere(100, 100,   0, 10, 255, 0, 0, 1)
sphere(  0, 100, 100, 10, 255, 0, 0, 1)
sphere(100, 100, 100, 10, 255, 0, 0, 1)

# A blue box is defined with one corner at the origin, and the opposite
# corner at (100, 100, 100). This will result in a cube with each side
# being of magnitude 100.
box(0, 0, 0, 100, 100, 100, 0, 0, 255, 1)

# Cone along the X axis, base at x=200, radius 20, tip at x=300
cone ( 200,   0,   0, 10,   300,   0,   0,   255, 100, 100, 1, &quot;X&quot;)
</pre></div>
</div>
<p><strong>Resulting Structure</strong></p>
<a class="reference internal image-reference" href="../../../_images/example_struct.png"><img alt="../../../_images/example_struct.png" src="../../../_images/example_struct.png" style="width: 50%;" /></a>
</div>
<div class="section" id="transparency">
<h2>Transparency<a class="headerlink" href="#transparency" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>JavaFX does not sort 3D objects by depth. What this means is that you have to be thoughtful of the order you add 3D shapes to a scene. For example, if a sphere needed to be displayed
inside a translucent box, the sphere would have to be added <em>before</em> the box. If the box first were added first, it would still be translucent, but the JavaFX renderer would not draw
the sphere because it doesn’t sort the scene graph by depth.</p>
<p><strong>Examples</strong></p>
<blockquote>
<div><dl>
<dt>Here, the box is added first and the sphere is not drawn.</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>background(32, 32, 32, 1)
box(0, 0, 0, 100, 100, 100, 0, 0, 255, 0.1)
sphere(50, 50, 50, 10, 255, 0, 0, 1)
</pre></div>
</div>
<a class="reference internal image-reference" href="../../../_images/bad_transparency.png"><img alt="../../../_images/bad_transparency.png" src="../../../_images/bad_transparency.png" style="width: 50%;" /></a>
</dd>
<dt>Here, the box is added second and the sphere is drawn correctly.</dt><dd><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>background(32, 32, 32, 1)
sphere(50, 50, 50, 10, 255, 0, 0, 1)
box(0, 0, 0, 100, 100, 100, 0, 0, 255, 0.1)
</pre></div>
</div>
<a class="reference internal image-reference" href="../../../_images/good_transparency.png"><img alt="../../../_images/good_transparency.png" src="../../../_images/good_transparency.png" style="width: 50%;" /></a>
</dd>
</dl>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="compatibility">
<h2>Compatibility<a class="headerlink" href="#compatibility" title="Permalink to this headline">¶</a></h2>
<p>The 3D Viewer requires support from the graphics system.</p>
<p>Known to work:</p>
<blockquote>
<div><ul class="simple">
<li><p>OpenJDK 11 on Mac OS 10.13.6</p></li>
<li><p>OpenJDK 11 on Windows 10</p></li>
<li><p>Oracle JDK 9, Oracle JDK 10, and OpenJDK 11 on RHEL 7.6</p></li>
</ul>
</div></blockquote>
<p>Running on Linux requires direct graphics on a local machine.</p>
<p>Can be made to work:</p>
<blockquote>
<div><ul class="simple">
<li><p>Oracle JDK 10 or OpenJDK 11 on Centros 7.5 running inside VirtualBox, hosted on RHEL 7.6,
when setting <code class="docutils literal notranslate"><span class="pre">-Dprism.forceGPU=true</span></code></p></li>
</ul>
</div></blockquote>
<p>In case of problems which usually include error messages
<code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">can't</span> <span class="pre">support</span> <span class="pre">ConditionalFeature.SCENE3D</span></code>,
start the program with <code class="docutils literal notranslate"><span class="pre">-Dprism.verbose=true</span></code> and <code class="docutils literal notranslate"><span class="pre">-Djdk.gtk.verbose=true</span></code></p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">3D Viewer</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#shape-shp-file-syntax">Shape (.shp) File Syntax</a></li>
<li><a class="reference internal" href="#example-shape-file">Example Shape File</a></li>
<li><a class="reference internal" href="#transparency">Transparency</a></li>
<li><a class="reference internal" href="#compatibility">Compatibility</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../../../core/ui/doc/index.html"
                        title="previous chapter">Active Jobs</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../alarm/datasource/doc/index.html"
                        title="next chapter">Alarm Datasource</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/app/3d-viewer/doc/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../alarm/datasource/doc/index.html" title="Alarm Datasource"
             >next</a> |</li>
        <li class="right" >
          <a href="../../../core/ui/doc/index.html" title="Active Jobs"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Phoebus 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../applications.html" >Applications</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">3D Viewer</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Phoebus Developers.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.2.
    </div>
  </body>
</html>